/*
A view that allows a user to view and edit a list of students.
*/
(function(){Parachute.EditableListView=Ember.View.extend({tagName:"ul",classNames:["editable-list"],templateName:"editable_list",focusOut:function(e){return/^\s*$/.test(e.target.value)&&(e.target.value=""),this._update()},keyDown:function(e,t){var n,r,i;i=e.keyCode||e.which,n=this._currentIndex(),r=this._inputs();if(n==null)return;(i===8||i===46)&&e.target.value===""&&r.length>1&&((n!==r.length-1||r[n-1].value==="")&&this.get("controller").removeAt(n),this._selectAt(n===0?0:n-1),e.preventDefault()),i===13&&(n!==r.length-2&&this.get("controller").insertEmptyStudent(n+1),Ember.run.next(this,function(){return this._selectAt(n+1)}),e.preventDefault()),i===38&&(this._selectAt(n-1),e.preventDefault());if(i===40)return this._selectAt(n+1),e.preventDefault()},keyUp:function(){return this._update()},change:function(){return this._update()},_inputs:function(){return this.$().find("input")},_currentIndex:function(){return this._inputs().index(document.activeElement)},_selectAt:function(e){var t;return t=this._inputs(),$(t[e]).caret(t[e].value.length)},_update:function(){var e;e=this._inputs();if(this.get("controller").get("lastObject").name!=="")return this.get("controller").insertEmptyStudent()}})}).call(this);