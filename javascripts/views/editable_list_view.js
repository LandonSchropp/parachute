/*
A view that allows a user to view and edit a list of items. This view will add and remove items based upon the user's use of the enter and delete keys.
*/
(function(){Parachute.EditableListView=Ember.View.extend({tagName:"ul",classNames:["editable-list"],templateName:"editable_list",keyDown:function(e,t){var n,r;r=e.keyCode||e.which,n=this._currentIndex();if(n==null)return;if([8,46,13,38,40].indexOf(r)===-1)return;(r===8||r===46)&&e.target.value===""&&n>0&&(this.get("controller").removeAt(n),this._selectAt(n-1),this.itemDeleted=!0,e.preventDefault()),r===13&&(this.get("controller").insertAt(n+1,{}),this.itemAdded=!0,Ember.run.next(this,function(){return this._selectAt(n+1)}),e.preventDefault()),r===38&&(this._selectAt(n-1),e.preventDefault());if(r===40)return this._selectAt(n+1),e.preventDefault()},_inputElements:function(){return this.$().find("input")},_currentIndex:function(){return this._inputElements().index(document.activeElement)},_selectAt:function(e){var t;t=this._inputElements();if(e>=0&&e<t.length)return $(t[e]).caret(t[e].value.length);return}})}).call(this);