(function(e){var t=function(){if(!this.is(":focus"))return null;if(this.length===0)return null;if(this.val().length===0)return 0;var e=this.get(0);if(typeof e.selectionStart=="number")return e.selectionStart;var t=document.selection.createRange();if(!t||t.parentElement()!=e)return 0;var n=e.value.replace(/\r\n/g,"\n"),r=e.value.length,i=e.createTextRange();i.moveToBookmark(t.getBookmark());var s=e.createTextRange();s.collapse(!1);if(i.compareEndPoints("StartToEnd",s)>-1)return n.length;var o=-i.moveStart("character",-r);return o},n=function(e){this.is(":focus")||this.focus(),e<0&&(e=0),e>this.val().length&&(e=this.val().length);if(this.length===0)return this;var t=this.get(0);if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}return this};e.fn.caret=function(e){return typeof e=="number"?n.apply(this,[e]):t.apply(this,[])}})(jQuery);